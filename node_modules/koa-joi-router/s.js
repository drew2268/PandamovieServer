const koa = require('koa')
const router = require('./')
const Joi = require('./').Joi

function test(body){
  console.log(body);
  return "Posted Route!";
}

let c = {
    method: 'post',
    path: '/hello',
    validate: {
      type: 'json',
      body: {
        test: Joi.string().length(10)
      },
      continueOnError: true
    },
    handler: async (ctx) => {
      const user = await test(ctx.request.body);
      ctx.status = 200;
      ctx.body = user;
    }
}

const app = new koa();
const r = router();
r.route(c);
app.use(r.middleware());
const server = app.listen(9777, () => console.log('we started', server.address()))
